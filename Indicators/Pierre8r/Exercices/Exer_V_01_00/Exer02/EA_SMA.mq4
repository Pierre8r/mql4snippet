//+------------------------------------------------------------------+
//|                                                       EA_SMA.mq4 |
//|                                         Copyright 2013, Pierre8r |
//|                                                                  |
//+------------------------------------------------------------------+
#property copyright "Copyright 2013, Pierre8r"
#property link      ""

//---- indicator parameters
extern int MA_Period=20;

int HourRes = 999999999999;

//+------------------------------------------------------------------+
//| expert initialization function                                   |
//+------------------------------------------------------------------+
int init() {
//----

//----
	return(0);
}
//+------------------------------------------------------------------+
//| expert deinitialization function                                 |
//+------------------------------------------------------------------+
int deinit() {
//----

//----
	return(0);
}
//+------------------------------------------------------------------+
//| expert start function                                            |
//+------------------------------------------------------------------+
int start() {
//----
	if(Hour()!=HourRes) {
		Print("New Hour  SMA 20 : ", sma(0));
		HourRes = Hour();
	}
//----
	return(0);
}
//+------------------------------------------------------------------+
double sma(int i) {
	double sum=0;
	int pos;

	if (Bars<MA_Period) return(0);
	for(pos=(MA_Period-1); pos>=0; pos--) {
		sum+=Close[pos+i];
	}
	return(sum/MA_Period);
}
//+------------------------------------------------------------------+
